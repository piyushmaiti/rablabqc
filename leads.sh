#!/bin/bash

# Array of numbers
numbers=(LDS0370630 LDS0220081 LDS0370370 LDS0990452 LDS0370073 LDS0670236 LDS1770173 LDS3600443 LDS0110091 LDS1770616 LDS0220195 LDS0370387 LDS0730619 LDS0670080 LDS0370058 LDS0370155 LDS0370128 LDS9410367 
LDS0370418 LDS0100385 LDS0360279 LDS1770264 LDS0730558 LDS1770486 LDS1770351 LDS0370380 LDS1770109 LDS0220050 LDS0370332 LDS0370345 LDS1770200 LDS0670070 LDS9410537 LDS1770576 LDS0370074 LDS0220282 LDS0100337 
LDS0370393 LDS0220062 LDS0220522 LDS1770491 LDS0370379 LDS1770346 LDS0990469 LDS1770540 LDS0070120 LDS0990463 LDS0370336 LDS0370246 LDS0180162 LDS1770482 LDS0070176 LDS1770151 LDS0370014 LDS0180237 LDS0730655 
LDS0110092 LDS0220604 LDS0730024 LDS1770169 LDS9410060 LDS9410184 LDS0370668 LDS0110230 LDS1770424 LDS0990507 LDS1770063 LDS0070278 LDS9410412 LDS0360248 LDS9410152 LDS1770511 LDS0990445 LDS0370013 LDS0220123 
LDS0070253 LDS0370475 LDS0730636 LDS0180157 LDS0980573 LDS0370170 LDS1770072 LDS0820442 LDS0220358 LDS0370477 LDS9410391 LDS0370047 LDS0370333 LDS0180189 LDS0220026 LDS0370438 LDS0370002 LDS0220267 LDS0370569 
LDS0100317 LDS0730225 LDS9410525 LDS0100113 LDS0370011 LDS0360134 LDS0370381 LDS0370365 LDS0220099 LDS1770617 LDS0370016 LDS0990547 LDS0180179 LDS1770215 LDS1770318 LDS0990405 LDS0730051 LDS1770234 LDS9410049 
LDS0670143 LDS0180251 LDS0370538 LDS0220126 LDS1770178 LDS3600220 LDS9410638 LDS0100309 LDS0990416 LDS0370037 LDS1770645 LDS0730492 LDS0160485 LDS0370504 LDS0370001 LDS0070559 LDS9410185 LDS9410066 LDS0670085 
LDS0370127 LDS0370382 LDS9410023 LDS9410357 LDS0990439 LDS0990543 LDS0370012 LDS0370086 LDS0370015 LDS0370316 LDS9410564 LDS9410487 LDS9410315 LDS0100269 LDS3600043 LDS0360306 LDS0370359 LDS0360201 LDS1770403 
LDS0370275 LDS3600068 LDS1770670 LDS9410395 LDS0980530 LDS1770272 LDS3600460)

# Function to process each number
process_number() {
    printf "##### \n Processing $1 \n"
    python /home/mac/pmaiti/Desktop/leads_qc/rablabqc/leadsqc.py "/mnt/coredata/processing/leads/data/processed/$1" /mnt/coredata/Projects/LEADS/data_f7p1/qc_leads_6mm/mri/ -mri
    #python /home/mac/pmaiti/Desktop/leads_qc/rablabqc/leadsqc.py "/mnt/coredata/processing/leads/data/processed/$1" /mnt/coredata/Projects/LEADS/data_f7p1/qc_leads_6mm/fbb/ -fbb
    #python /home/mac/pmaiti/Desktop/leads_qc/rablabqc/leadsqc.py "/mnt/coredata/processing/leads/data/processed/$1" /mnt/coredata/Projects/LEADS/data_f7p1/qc_leads_6mm/ftp/ -ftp
    #python /home/mac/pmaiti/Desktop/leads_qc/rablabqc/leadsqc.py "/mnt/coredata/processing/leads/data/processed/$1" /mnt/coredata/Projects/LEADS/data_f7p1/qc_leads_6mm/fdg/ -fdg
    printf "#####  \n"
}

# Export the function for parallel to use
export -f process_number

# Capture the start time
start_time=$(date +%s)

# Run the process_number function in parallel
parallel -j 2 process_number ::: "${numbers[@]}"

# Capture the end time
end_time=$(date +%s)

# Calculate the elapsed time
elapsed_time=$(( end_time - start_time ))

# Display the total time elapsed
printf "Total time elapsed: %d seconds\n" $elapsed_time
